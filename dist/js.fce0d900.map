{"version":3,"sources":["js/index.js"],"names":["storageAvailable","type","storage","window","x","setItem","removeItem","e","DOMException","code","name","length","obj","running","addEventListener","requestAnimationFrame","dispatchEvent","CustomEvent","throttle","data","currentPanel","panels","localStorage","isNarrow","isSuperNarrow","isSuperWide","navigation","setup","document","querySelectorAll","numbers","querySelector","getItem","parseInt","firstChild","removeChild","i","newLink","createElement","href","id","innerHTML","appendChild","onclick","goToPanel","substring","event","keyCode","wantedPanel","section","myWidth","clientWidth","scrollLeft","style","opacity","numbersLinks","classList","resizeArrows","getElementsByClassName","parentNode","setupDemoResize","element","resizer","startResize","width","clientX","getBoundingClientRect","height","clientY","offsetTop","stopResize","removeEventListener","initResize"],"mappings":"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","file":"js.fce0d900.map","sourceRoot":"..","sourcesContent":["import '../scss/styles.scss';\n\n// throttle resize – from https://developer.mozilla.org/en-US/docs/Web/Events/resize\n\n(function() {\n\tvar throttle = function(type, name, obj) {\n\t\tobj = obj || window;\n\t\tvar running = false;\n\t\tvar func = function() {\n\t\t\tif (running) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\trunning = true;\n\t\t\trequestAnimationFrame(function() {\n\t\t\t\tobj.dispatchEvent(new CustomEvent(name));\n\t\t\t\trunning = false;\n\t\t\t});\n\t\t};\n\t\tobj.addEventListener(type, func);\n\t};\n\n\tthrottle('resize', 'optimizedResize');\n})();\n\n// test for localstorage\n\nfunction storageAvailable(type) {\n\ttry {\n\t\tvar storage = window[type],\n\t\t\tx = '__storage_test__';\n\t\tstorage.setItem(x, x);\n\t\tstorage.removeItem(x);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn (\n\t\t\te instanceof DOMException &&\n\t\t\t// everything except Firefox\n\t\t\t(e.code === 22 ||\n\t\t\t\t// Firefox\n\t\t\t\te.code === 1014 ||\n\t\t\t\t// test name field too, because code might not be present\n\t\t\t\t// everything except Firefox\n\t\t\t\te.name === 'QuotaExceededError' ||\n\t\t\t\t// Firefox\n\t\t\t\te.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n\t\t\t// acknowledge QuotaExceededError only if there's something already stored\n\t\t\tstorage.length !== 0\n\t\t);\n\t}\n}\n\nlet data = {\n\tcurrentPanel: 0,\n\tpanels: 0,\n\tlocalStorage: false,\n\tisNarrow: false,\n\tisSuperNarrow: false,\n\tisSuperWide: false\n};\n\nconst navigation = {\n\tsetup: function() {\n\t\tlet panels = document.querySelectorAll('article');\n\t\tdata.panels = panels.length;\n\t\tlet numbers = document.querySelector('#mainnav #numbers');\n\t\tif (storageAvailable('localStorage')) {\n\t\t\tdata.localStorage = true;\n\t\t\tif (localStorage.getItem('currentPage')) {\n\t\t\t\tdata.currentPanel = parseInt(localStorage.getItem('currentPage'), 10);\n\t\t\t}\n\t\t}\n\t\twhile (numbers.firstChild) {\n\t\t\tnumbers.removeChild(numbers.firstChild);\n\t\t}\n\t\tfor (let i = 0; i < data.panels; i++) {\n\t\t\tlet newLink = document.createElement('a');\n\t\t\tnewLink.href = '#';\n\t\t\tnewLink.id = `go_${i}`;\n\t\t\tnewLink.innerHTML = i + 1;\n\t\t\tnumbers.appendChild(newLink);\n\t\t\tnewLink.onclick = function() {\n\t\t\t\tnavigation.goToPanel(parseInt(this.id.substring(3), 10));\n\t\t\t};\n\t\t}\n\t\tdocument.querySelector('#goleft').onclick = function() {\n\t\t\tif (data.currentPanel > 0) {\n\t\t\t\tnavigation.goToPanel(data.currentPanel - 1);\n\t\t\t}\n\t\t};\n\t\tdocument.querySelector('#goright').onclick = function() {\n\t\t\tif (data.currentPanel + 1 < data.panels) {\n\t\t\t\tnavigation.goToPanel(data.currentPanel + 1);\n\t\t\t}\n\t\t};\n\t\twindow.addEventListener('keydown', event => {\n\t\t\t// handle keyboard\n\t\t\tif (event.keyCode === 37 && data.currentPanel > 0) {\n\t\t\t\tnavigation.goToPanel(data.currentPanel - 1);\n\t\t\t}\n\t\t\tif (event.keyCode === 39 && data.currentPanel + 1 < data.panels) {\n\t\t\t\tnavigation.goToPanel(data.currentPanel + 1);\n\t\t\t}\n\t\t});\n\n\t\tthis.goToPanel(data.currentPanel);\n\t\twindow.addEventListener('optimizedResize', function() {\n\t\t\t// handle resize\n\t\t\tnavigation.goToPanel(data.currentPanel);\n\t\t});\n\t},\n\tgoToPanel(wantedPanel) {\n\t\tconst section = document.querySelector('main section');\n\t\tconst myWidth = section.clientWidth;\n\t\tsection.scrollLeft = myWidth * wantedPanel;\n\t\tsection.querySelector(`article#panel_${data.currentPanel}`).style.opacity = 0;\n\t\tsection.querySelector(`article#panel_${wantedPanel}`).style.opacity = 1;\n\t\tdata.currentPanel = wantedPanel;\n\t\tlet numbersLinks = document.querySelectorAll('#numbers a');\n\t\tdocument.querySelector('#goleft').classList = wantedPanel === 0 ? 'off' : '';\n\t\tdocument.querySelector('#goright').classList = wantedPanel === data.panels - 1 ? 'off' : '';\n\t\tfor (let i = 0; i < numbersLinks.length; i++) {\n\t\t\tnumbersLinks[i].classList = '';\n\t\t\tif (i === wantedPanel) {\n\t\t\t\tnumbersLinks[i].classList = 'on';\n\t\t\t}\n\t\t}\n\t\tif (document.querySelector(`article#panel_${wantedPanel} .demoresize`)) {\n\t\t\t// first, delete all existing resizearrow elements\n\t\t\tconst resizeArrows = document.getElementsByClassName('resizearrow');\n\t\t\twhile (resizeArrows[0]) {\n\t\t\t\tresizeArrows[0].parentNode.removeChild(resizeArrows[0]);\n\t\t\t}\n\t\t\tnavigation.setupDemoResize(document.querySelector(`article#panel_${wantedPanel} .demoresize`));\n\t\t}\n\t\tif (data.localStorage) {\n\t\t\tlocalStorage.setItem('currentPage', wantedPanel);\n\t\t}\n\t},\n\tsetupDemoResize(element) {\n\t\t// mostly from here: https://stackoverflow.com/questions/8960193/how-to-make-html-element-resizable-using-pure-javascript\n\t\tlet resizer = document.createElement('div');\n\t\tresizer.innerHTML = '⇲';\n\t\tresizer.classList = 'resizearrow';\n\t\telement.appendChild(resizer);\n\t\tresizer.addEventListener('mousedown', initResize, false);\n\n\t\tfunction initResize(e) {\n\t\t\twindow.addEventListener('mousemove', startResize, false);\n\t\t\twindow.addEventListener('mouseup', stopResize, false);\n\t\t}\n\t\tfunction startResize(e) {\n\t\t\telement.style.width = e.clientX - element.getBoundingClientRect().x + 'px';\n\t\t\telement.style.height = e.clientY - element.offsetTop + 'px';\n\t\t}\n\t\tfunction stopResize(e) {\n\t\t\twindow.removeEventListener('mousemove', startResize, false);\n\t\t\twindow.removeEventListener('mouseup', stopResize, false);\n\t\t\telement.style.width = '100%';\n\t\t\telement.style.height = '100%';\n\t\t}\n\t}\n};\n\nnavigation.setup();\n\ndocument.querySelector('a#narrow').onclick = function() {\n\tdata.isSuperNarrow = false;\n\tdata.isSuperWide = false;\n\tdocument.querySelector('a#supernarrow').innerHTML = 'supernarrow version';\n\tdocument.querySelector('a#superwide').innerHTML = 'superwide version';\n\tdocument.querySelector('#panel_6 #example1').classList = data.isNarrow ? 'demo_document' : 'demo_document narrow';\n\tdocument.querySelector('a#narrow').innerHTML = data.isNarrow ? 'narrow version' : 'normal version';\n\tdata.isNarrow = !data.isNarrow;\n};\n\ndocument.querySelector('a#supernarrow').onclick = function() {\n\tdata.isNarrow = false;\n\tdata.isSuperWide = false;\n\tdocument.querySelector('a#narrow').innerHTML = 'narrow version';\n\tdocument.querySelector('a#superwide').innerHTML = 'superwide version';\n\tdocument.querySelector('#panel_6 #example1').classList = data.isSuperNarrow\n\t\t? 'demo_document'\n\t\t: 'demo_document supernarrow';\n\tdocument.querySelector('a#supernarrow').innerHTML = data.isSuperNarrow ? 'supernarrow version' : 'normal version';\n\tdata.isSuperNarrow = !data.isSuperNarrow;\n};\n\ndocument.querySelector('a#superwide').onclick = function() {\n\tdata.isNarrow = false;\n\tdata.isSuperNarrow = false;\n\tdocument.querySelector('a#narrow').innerHTML = 'narrow version';\n\tdocument.querySelector('a#supernarrow').innerHTML = 'supernarrow version';\n\n\tdocument.querySelector('#panel_6 #example1').classList = data.isSuperWide\n\t\t? 'demo_document'\n\t\t: 'demo_document superwide';\n\tdocument.querySelector('a#superwide').innerHTML = data.isSuperWide ? 'superwide version' : 'normal version';\n\tdata.isSuperWide = !data.isSuperWide;\n};\n"]}